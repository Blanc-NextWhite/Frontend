<!-- The next div is needed to fix a bug regarding flexbox, min-height and IE -->
<div layout="column">
  <div id="chat" layout="column" ng-controller="CommentBoxController as commentBox">
    <md-tabs flex class="chat-tabs" md-selected="commentBox.currentTab" md-stretch-tabs="always">
      <md-tab>
        <md-tab-label>Chat</md-tab-label>
        <md-tab-body>
          <md-content scroll-glue>
            <div ng-repeat="message in commentBox.messages[0] track by $index"
                ng-class="['message', message.player.tags]">
              <md-button class="chat-player-name">{{::message.player.name}}:</md-button>
              {{::message.message}}
            </div>
          </md-content>
        </md-tab-body>
      </md-tab>
      <md-tab ng-if="commentBox.joinedLobby">
        <md-tab-label>Lobby chat</md-tab-label>
        <md-tab-body>
          <md-content scroll-glue>
            <div ng-repeat="message in commentBox.messages[commentBox.joinedLobby] track by $index"
                ng-class="['message', message.player.tags]">
              <md-button class="chat-player-name">{{::message.player.name}}:</md-button>
              {{::message.message}}
            </div>
          </md-content>
        </md-tab-body>
      </md-tab>
    </md-tabs>
    <md-input-container>
      <label for="chatbox-message">Type your message</label>
      <textarea id="chatbox-message" name="message" ng-keydown="commentBox.sendMessage($event)" ng-model="commentBox.messageBox"></textarea>
    </md-input-container>
  </div>
</div>
